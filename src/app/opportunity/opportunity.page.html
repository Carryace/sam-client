<div class="usa-grid">

  <!--Sidebar-->
  <aside class="usa-width-one-fourth">
    <br />
    <br />
    <!--Side Navigation-->
    <nav>
      <ul class="usa-sidenav-list">
        <li><a href="{{ currentUrl }}#gen-info">General Infornation</a></li>
        <li><a href="{{ currentUrl }}#classification">Classification</a></li>
        <li><a href="{{ currentUrl }}#syn-desc">Synopsis/Description</a></li>
        <li><a href="{{ currentUrl }}#package">Packages</a></li>
        <li><a href="{{ currentUrl }}#contact-info">Contact Information</a></li>
        <li><a href="{{ currentUrl }}#history">History</a></li>
      </ul>
    </nav>
  </aside>

  <!--Main Content-->
  <div class="usa-width-three-fourths" *ngIf="opportunity">
    <section>
      <h1>{{ opportunity.data?.title }}</h1>

      <ul class="usa-unstyled-list">
        <li>
          <strong>Solicitation Number: </strong>{{ opportunity.data?.solicitationNumber }}
        </li>
        <li *ngIf='organization'>
          <strong [ngSwitch]='organization.type'>
            <ng-container *ngSwitchCase="'DEPARTMENT'">Department</ng-container>
            <ng-container *ngSwitchCase="'AGENCY'">Agency</ng-container>
            <ng-container *ngSwitchCase="'OFFICE'">Office</ng-container>:
          </strong>
          <ng-container *ngIf="organization.agencyName">{{ organization.agencyName }}</ng-container>
          <ng-container *ngIf="organization.name && !organization.agencyName">{{ organization.name }}</ng-container>
        </li>
        <li *ngIf="opportunityLocation">
          <strong>Location: </strong>
          <ng-container *ngIf="opportunityLocation.street">{{ opportunityLocation.street }}</ng-container>
          <ng-container *ngIf="opportunityLocation.city">{{ opportunityLocation.city }}</ng-container>
          <ng-container *ngIf="opportunityLocation.state">{{ opportunityLocation.state }}</ng-container>
          <ng-container *ngIf="opportunityLocation.zip">{{ opportunityLocation.zip }}</ng-container>
          <ng-container *ngIf="opportunityLocation.country">{{ opportunityLocation.country }}</ng-container>
        </li>
      </ul>
    </section>

    <section id="gen-info">
      <h2>General Information</h2>
      <ul class="usa-unstyled-list">
        <li>
          <strong>Opportunity Type: </strong>
          {{ opportunity.data?.type | opportunityTypeLabel }}
        </li>
        <li *ngIf="opportunity.postedDate">
          <strong>Posted Date: </strong>
          {{ opportunity.postedDate | dateFormat: 'MMM DD, YYYY h:mm a' }}
        </li>
        <li *ngIf="originalOpportunity?.postedDate">
          <strong>Original Posted Date: </strong>
          {{ originalOpportunity.postedDate | dateFormat: 'MMM DD, YYYY h:mm a' }}
        </li>
        <li *ngIf="opportunity.data?.solicitation?.deadlines?.response">
          <strong>Response Date: </strong>
          {{ opportunity.data.solicitation.deadlines.response | dateFormat: 'MMM DD, YYYY h:mm a UTCZ' | timezoneLabel }}
        </li>
        <li *ngIf="originalOpportunity?.data?.solicitation?.deadlines?.response">
          <strong>Original Response Date: </strong>
          {{ originalOpportunity.data?.solicitation?.deadlines?.response | dateFormat: 'MMM DD, YYYY h:mm a UTCZ' | timezoneLabel }}
        </li>
        <li [ngSwitch]="opportunity.data?.archive?.type">
          <strong>Archiving Policy: </strong>
          <ng-container *ngSwitchCase="'manual'">Manual Archive</ng-container>
          <ng-container *ngSwitchCase="'auto15'">Automatic, 15 days after response date</ng-container>
          <ng-container *ngSwitchCase="'autocustom'">Automatic, on specified date</ng-container>
        </li>
        <li *ngIf="opportunity.data?.archive?.date">
          <strong>Archive Date: </strong>
          {{ opportunity.data?.archive?.date | dateFormat: 'MMM DD, YYYY h:mm a' }}
        </li>
        <li *ngIf="originalOpportunity?.data?.archive?.date">
          <strong>Original Archive Date: </strong>
          {{ originalOpportunity.data?.archive?.date | dateFormat: 'MMM DD, YYYY h:mm a' }}
        </li>
      </ul>
    </section>

    <section id="contact-info">
      <h2>Contact Information</h2>
      <div class="usa-grid-full" *ngIf="opportunity.data?.pointOfContact">
        <div class="usa-width-one-half" *ngIf="hasPOC(0)">
          <h3>Primary Point of Contact</h3>
          <ul class="usa-unstyled-list">
            <li><strong>{{opportunity.data?.pointOfContact[0].fullName}}</strong></li>
            <li *ngIf="opportunity.data?.pointOfContact[0].title">
              <!--TODO: fix capitalize pipe-->
              <em [innerHTML]="opportunity.data?.pointOfContact[0].title"></em>
            </li>
            <li *ngIf="opportunity.data?.pointOfContact[0].email">
              <i class="fa fa-envelope-o" aria-hidden="true"></i> &nbsp;
              <a href="mailto:{{opportunity.data?.pointOfContact[0].email}}">
                {{opportunity.data?.pointOfContact[0].email}}
              </a>
            </li>
            <li *ngIf="opportunity.data?.pointOfContact[0].phone">
              <i class="fa fa-phone" aria-hidden="true"></i> &nbsp;
              {{opportunity.data?.pointOfContact[0].phone}}
            </li>
            <li *ngIf="opportunity.data?.pointOfContact[0].fax">
              <i class="fa fa-fax" aria-hidden="true"></i> &nbsp;
              {{opportunity.data?.pointOfContact[0].fax}}
            </li>
          </ul>
        </div>
        <div class="usa-width-one-half" *ngIf="hasPOC(1)">
          <h3>Secondary Point of Contact</h3>
          <ul class="usa-unstyled-list">
            <li><strong>{{opportunity.data?.pointOfContact[1].fullName}}</strong></li>
            <li *ngIf="opportunity.data?.pointOfContact[1].title">
              <em [innerHTML]="opportunity.data?.pointOfContact[1].title"></em>
            </li>
            <li *ngIf="opportunity.data?.pointOfContact[1].email">
              <i class="fa fa-envelope-o" aria-hidden="true"></i> &nbsp;
              <a href="mailto:{{opportunity.data?.pointOfContact[1].email}}">
                {{opportunity.data?.pointOfContact[1].email}}
              </a>
            </li>
            <li *ngIf="opportunity.data?.pointOfContact[1].phone">
              <i class="fa fa-phone" aria-hidden="true"></i> &nbsp;
              {{opportunity.data?.pointOfContact[1].phone}}
            </li>
            <li *ngIf="opportunity.data?.pointOfContact[1].fax">
              <i class="fa fa-fax" aria-hidden="true"></i> &nbsp;
              {{opportunity.data?.pointOfContact[1].fax}}
            </li>
          </ul>
        </div>
      </div>
    </section>

  </div>
</div>
